<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Froggy Quest</title>
    <style>
        /* –ó–¥–µ—Å—å —Å—Ç–∏–ª–∏ –∏–∑ —Ç–≤–æ–µ–π 7 —á–∞—Å—Ç–∏ */
        *{box-sizing:border-box;margin:0;padding:0}
        :root{--ui:#27ae60;--glow:#fff;--timer:#e74c3c;--tcol:#fff;}
        html,body{width:100%;height:100%;overflow:hidden;font-family:Arial,sans-serif;background:#1a5276;}
        #start-screen{position:fixed;inset:0;background:rgba(0,0,0,.72);z-index:3000;display:none;flex-direction:column;justify-content:center;align-items:center;color:var(--tcol);text-align:center;padding:20px;}
        #start-btn{padding:18px 56px;font-size:22px;font-weight:bold;background:var(--ui);color:#fff;border:none;border-radius:50px;cursor:pointer;text-transform:uppercase;box-shadow:0 8px 24px rgba(0,0,0,.5);}
        #ui{position:absolute;top:0;width:100%;z-index:1000;pointer-events:none;}
        #header{background:var(--ui);color:#fff;padding:9px;text-align:center;font-weight:bold;font-size:18px;pointer-events:auto;}
        #lives-wrap{position:absolute;top:46px;left:16px;display:flex;gap:6px;pointer-events:auto;}
        .life-icon{width:46px;height:46px;font-size:28px;line-height:46px;text-align:center;}
        .life-icon::before{content:"‚ù§Ô∏è"}
        #qbox{background:#fff;width:88%;max-width:520px;margin:8px auto;padding:12px 14px;border-radius:16px;text-align:center;box-shadow:0 6px 18px rgba(0,0,0,.3);pointer-events:auto;}
        .tbar{width:100%;height:7px;background:#dfe6e9;border-radius:4px;margin-top:8px;overflow:hidden;}
        #tfill{width:100%;height:100%;background:var(--timer);transition:width .1s linear;}
        #world{position:absolute;inset:0;padding-top:56px;overflow:hidden;}
        #pond{position:relative;width:100%;height:100%;overflow:hidden;}
        .leaf{position:absolute;width:20vw;height:16vw;max-width:180px;max-height:150px;background:radial-gradient(circle,#27ae60,#1a7a40);border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:.85;transform:scale(.85);transition:transform .4s,opacity .4s;padding:14px;text-align:center;font-size:18px;color:#fff;font-weight:bold;text-shadow:1px 1px 3px rgba(0,0,0,.9);}
        .leaf.active{opacity:1;transform:scale(1.1);z-index:10;cursor:pointer;filter:drop-shadow(0 0 14px var(--glow));}
        #frog{position:absolute;width:80px;height:80px;font-size:50px;line-height:1;text-align:center;transform:translate(-50%,-70%);z-index:999;transition:left .6s, top .6s;}
        #frog::after{content:"üê∏"}
        .jumping-frog{transform:translate(-50%,-90%) scale(1.4)!important;}
        @keyframes shock{0%{transform:scale(1.1) translate(2px,2px);filter:brightness(1.6) hue-rotate(180deg)}100%{transform:scale(1.1) translate(0,0)}}
        .shock{animation:shock .1s infinite;}
        #overlay{position:fixed;inset:0;background:transparent;z-index:2000;display:none;flex-direction:column;justify-content:center;align-items:center;}
        .vmodal{background:rgba(255,255,255,.95);padding:36px;border-radius:20px;text-align:center;max-width:480px;box-shadow:0 20px 60px rgba(0,0,0,.5);}
        #fxCanvas{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2001;pointer-events:none;}
    </style>
</head>
<body>

<div id="start-screen">
    <h1 id="start-title">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>
    <p id="start-desc"></p>
    <button id="start-btn" onclick="hideStart()">–°–¢–ê–†–¢</button>
</div>

<div id="ui">
    <div id="header">–£–†–û–í–ï–ù–¨ 1</div>
    <div id="lives-wrap"></div>
    <div id="qbox">
        <div id="q-text">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞...</div>
        <div class="tbar"><div id="tfill"></div></div>
    </div>
</div>

<div id="world"><div id="pond"><div id="frog"></div></div></div>

<div id="overlay">
    <div class="vmodal" id="victory-modal" style="display:none;">
        <h1 id="v-title">–ü–æ–±–µ–¥–∞!</h1>
        <p id="v-msg"></p>
        <button onclick="location.reload()">–ï—â–µ —Ä–∞–∑</button>
    </div>
    <div id="gameover-screen" style="display:none; color: white;">
        <h1 id="go-text">–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h1>
        <button onclick="location.reload()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>
    <canvas id="fxCanvas"></canvas>
</div>

<script>
// --- –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–í–ò–ñ–ö–ê ---
var LB=[], LEVELS_META={}, lives=5, timerDur=15, currentLevel=1, step=0, questions=[], timer=null, lastLeaf=null, jumping=false;

// --- –®–ê–ì 2: –ú–ê–ì–ò–Ø –ó–ê–ì–†–£–ó–ö–ò ---
async function init() {
    const id = new URLSearchParams(window.location.search).get('id');
    if (!id) {
        document.getElementById('start-title').textContent = "–û—à–∏–±–∫–∞: ID –∏–≥—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω";
        return;
    }

    try {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è texts
        const response = await fetch(`https://VeRa422.github.io/texts/data/${id}.json`);
        if (!response.ok) throw new Error("–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ");
        
        const config = await response.json();

        // –í–ê–ñ–ù–û: –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å .data, —Ç–∞–∫ –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä Render —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—ä–µ–∫—Ç –Ω–∞–ø—Ä—è–º—É—é
        window.LB = config.levels;
        window.LEVELS_META = config.levelMeta;
        
        const s = config.settings;
        window.timerDur = s.timer;
        window.lives = s.lives;

        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω
        document.getElementById('start-title').textContent = config.title || "Froggy Quest";
        document.getElementById('start-desc').textContent = s.welcomeText || "";
        document.getElementById('start-btn').textContent = s.startBtnText || "–°–¢–ê–†–¢";

        document.getElementById('start-screen').style.display = 'flex';
        createPond();
    } catch (e) {
        console.error("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:", e);
        document.getElementById('start-title').textContent = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö";
        alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø–æ—è–≤–∏–ª—Å—è –ª–∏ —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ texts/data/");
    }
}

// --- –§–£–ù–ö–¶–ò–ò –ò–ì–†–´ (–∏–∑ —Ç–≤–æ–∏—Ö 8-9 —á–∞—Å—Ç–µ–π) ---

function createPond() {
    const pond = document.getElementById("pond");
    pond.innerHTML = '<div id="frog"></div>';
    for(var r=0; r<7; r++) {
        for(var c=1; c<4; c++) {
            var l = document.createElement("div");
            l.className = "leaf";
            l.style.left = (c*25) + "%";
            l.style.top = (r*12 + 10) + "%";
            l.id = "leaf-"+r+"-"+c;
            pond.appendChild(l);
        }
    }
}

function hideStart() {
    document.getElementById("start-screen").style.display = "none";
    startGameLogic();
}

function startGameLogic() {
    updateLives();
    loadLevel();
}

function updateLives() {
    const wrap = document.getElementById("lives-wrap");
    wrap.innerHTML = "";
    for(let i=0; i<lives; i++) {
        let d = document.createElement("div");
        d.className = "life-icon";
        wrap.appendChild(d);
    }
}

function loadLevel() {
    const q = LB[currentLevel][step];
    document.getElementById("q-text").textContent = q.q;
    // –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –ª–∏–ª–∏—è—Ö –∏ —Ç.–¥...
    // (–Ø —Å–æ–∫—Ä–∞—Ç–∏–ª–∞ –¥–µ—Ç–∞–ª–∏ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏, –Ω–æ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–≤–æ–π –ø–æ–ª–Ω—ã–π JS –∏–∑ —á–∞—Å—Ç–µ–π 8-9)
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å—ë
init();
</script>
</body>
</html>
